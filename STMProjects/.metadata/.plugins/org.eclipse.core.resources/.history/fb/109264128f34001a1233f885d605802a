/*
 * osci_defines.h
 *
 *  Created on: 24. 12. 2019
 *      Author: dot
 */

#ifndef INC_OSCI_DEFINES_H_
#define INC_OSCI_DEFINES_H_

// Number of measured samples
#define NUM_SAMPLES 512

// Should be calibrated with measurement
// These are used in calculations indirectly
#define OSCI_MEASUREMENT_BETA_5_X 4016
#define OSCI_MEASUREMENT_BETA_10_X 4035
#define OSCI_MEASUREMENT_BETA_20_X 4073
#define OSCI_MEASUREMENT_BETA_5_Y 3960
#define OSCI_MEASUREMENT_BETA_10_Y 4035
#define OSCI_MEASUREMENT_BETA_20_Y 4075

#define OSCI_MEASUREMENT_ADCCALIB_5_X 1.0f
#define OSCI_MEASUREMENT_ADCCALIB_10_X 1.0f
#define OSCI_MEASUREMENT_ADCCALIB_20_X 1.0f
#define OSCI_MEASUREMENT_ADCCALIB_5_Y 1.0f
#define OSCI_MEASUREMENT_ADCCALIB_10_Y 1.0f
#define OSCI_MEASUREMENT_ADCCALIB_20_Y 1.0f

#define OSCI_MEASUREMENT_MAX_LEVELS 4095
#define OSCI_MEASUREMENT_MAX_THRESHOLD_LEVELS_12BIT 4095
#define OSCI_MEASUREMENT_MAX_THRESHOLD_LEVELS_8BIT 255

// Default settings
#define OSCI_SETTINGS_DEFAULT_XOFFSET 0
#define OSCI_SETTINGS_DEFAULT_XSENSITIVITY 1
#define OSCI_SETTINGS_DEFAULT_YOFFSET 0
#define OSCI_SETTINGS_DEFAULT_YSENSITIVITY 1
#define OSCI_SETTINGS_DEFAULT_TIMEPERDIVISION 0.1
#define OSCI_SETTINGS_DEFAULT_THRESHOLD 0
#define OSCI_SETTINGS_DEFAULT_THRESHOLD 0
#define OSCI_SETTINGS_DEFAULT_TRIGGERCMD 0
#define OSCI_SETTINGS_DEFAULT_XVOLTAGERANGE 5
#define OSCI_SETTINGS_DEFAULT_YVOLTAGERANGE 5
#define OSCI_SETTINGS_DEFAULT_XGRATICULEDIVISIONS 10
#define OSCI_SETTINGS_DEFAULT_YGRATICULEDIVISIONS 10
#define OSCI_SETTINGS_DEFAULT_XHOLDOFFTIME 1000;
#define OSCI_SETTINGS_DEFAULT_YHOLDOFFTIME 1000;


enum OsciSettingsTriggerCommand
{
	ONLY_TRANSFORM 			= 0x00,
	MEASURE_SINGLE_X 		= 0x01,
	MEASURE_SINGLE_Y		= 0x02,
	MEASURE_CONTINUOUS_X	= 0x04,
	MEASURE_CONTINUOUS_Y	= 0x08,
	MEASURE_STOP			= 0x10,
	PING					= 0x20,
};

// Communication protocol constants
#define DATA_MAX_VALUE 4095
#define DATA_MIN_VALUE 0

enum Channels
{
	CHANNEL_X = 0,
	CHANNEL_Y = 1,
};

enum Opcodes
{
	SMSG_RESPONSE			= 0xFCFE,
	SMSG_CHANNEL_Y_DATA		= 0xFDFE,
	SMSG_CHANNEL_X_DATA		= 0xFEFE,
};
enum StateMachineType
{
	CHANNEL_STATE_MACHINE,
	TRANSCEIVER
};
#define MIN(a,b) (a)<(b)?(a):(b)
#define MAX(a,b) (a)>(b)?(a):(b)
#define TRUE 1
#define FALSE 0
#define MAX_16BIT 65535
#define MAX_12BIT 4095
#define MAX_8BIT 255

#endif /* INC_OSCI_DEFINES_H_ */
